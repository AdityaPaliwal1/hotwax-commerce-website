{% import "../../macros/macros.html" as macro %}
<div class="portfoliofilter-v2-{{name}} portfoliofilter-v2-wrap {{ module.advanced_customization.css_class_selector }}" {% if module.advanced_customization.css_id_selector %}id="{{ module.advanced_customization.css_id_selector }}"{% endif %}>
	{% if module.top_content %}
	<div class="portfoliofilter-v2-heading" {% if module.animation_settings.animation %}data-aos="{{ module.animation_settings.animation_type }}"{% endif %}>{{ module.top_content }}</div>
	{% endif %}
	{% if module.add_filter %}
	<div class="portfoliofilter-v2-category-wrap" {% if module.animation_settings.animation %}data-aos="{{ module.animation_settings.animation_type }}"{% endif %}>
		<div class="portfoliofilter-v2-button-group" data-portfoliofilter-v2-type="portfoliov2">
			{% if module.category_show_all_text %}<a class="portfoliofilter-v2-button is-checked" data-portfoliofilter-v2="">{{ module.category_show_all_text }}</a>{% endif %}		
			{% for item in module.team_item %}			
			{% for item2 in item.category_item %}  
			<a class="portfoliofilter-v2-button" data-portfoliofilter-v2=".{{ item2.category|lower|regex_replace("[^a-zA-Z]", "") }}">{{ item2.category }}</a>
			{% endfor %}
			{% endfor %}
		</div>
	</div>
	{% endif %}

	<div class="portfoliofilter-v2-item-wrap {{ module.style.column.column_type }} clearfix" {% if module.animation_settings.animation %}data-aos="{{ module.animation_settings.animation_type }}"{% endif %}>
		{% for item in module.team_item %}
		<div class="portfoliofilter-v2-item {% for item2 in item.category_item %}{{ item2.category|lower|regex_replace("[^a-zA-Z]", "") }} {% endfor %}">
			<div class="portfoliofilter-v2-item-inner {{ module.style.image.image_alignment }}">
				<div class="portfoliofilter-v2-item-cnt">
					<div class="portfoliofilter-v2-item-cnt-inner {{ module.style.column.alignment }}">
						{% if item.name_team %}<h5>{{ item.name_team }}</h5>{% endif %}
						{% if item.description %}<div class="desc">{{ item.description }}</div>{% endif %}					
						<div class="portfoliofilter-v2-featwrap">
							{% for item2 in item.features_item %}
							<div class="portfoliofilter-v2-featitem">
								{% if item2.icon_type %}
								<div class="portfoliofilter-v2-featicon grd">
									{% if item2.icon_type == "icon" %}
									{% icon
										name="{{ item2.icon.name }}"
										style="{{ item2.icon.type }}"
										unicode="{{ item2.icon.unicode }}"
										icon_set="{{ item2.icon.icon_set }}"
									%}
									{% endif %}
									{% if item2.icon_type == "image" %}
									{% if item2.image.src %}
									<img src="{{ item2.image.src }}" alt="{{ item2.image.alt }}">
									{% endif %}
									{% endif %}
								</div>
								{% endif %}
								{% if item2.title %}
								<div class="portfoliofilter-v2-feattitle">{{ item2.title }}</div>
								{% endif %}
							</div>
							{% endfor %}
						</div>					
					</div>
				</div>
				{% if item.image.src %}
				<div class="portfoliofilter-v2-img" style="background-image:url({{ item.image.src }})">
					{% if item.read_more %}
					<p class="more">
						{% set href = item.link.url.href %}
						{% if item.link.url.type is equalto "EMAIL_ADDRESS" %}
						{% set href = "mailto:" + href %}
						{% endif %}
						<a href="{{ href }}"
							{% if item.link.open_in_new_tab %}target="_blank"{% endif %}
							{% if item.link.rel %}rel="{{ item.link.rel }}"{% endif %}
							>
							<span class="read-txt">{{ item.read_more }}</span>
							{% if module.read_more_icon %}
							{% if module.reado_more_icon.read_more_icon %}
							<span class="read-icn">
								{% if module.reado_more_icon.read_more_icon == "icon" %}
								{% icon
								name="{{ module.reado_more_icon.icon.name }}"
								style="{{ module.reado_more_icon.icon.type }}"
								unicode="{{ module.reado_more_icon.icon.unicode }}"
								icon_set="{{ module.reado_more_icon.icon.icon_set }}"
							%}
								{% endif %}
								{% if module.reado_more_icon.read_more_icon == "image" %}
								{% if module.reado_more_icon.icon_image.src %}
								<img src="{{ module.reado_more_icon.icon_image.src }}" alt="{{ module.reado_more_icon.icon_image.alt }}">
								{% endif %}
								{% endif %}
							</span>
							{% endif %}
							{% endif %}
						</a>
					</p>
					{% endif %}
				</div>
				{% endif %}
			</div>
		</div>
		{% endfor %}
	</div>


	<div class="portfoliofilter-v2-btn-wrap {{ module.style.button_alignment.button_alignment }}">
		{{ macro.button_type2_settings(module.button_settings) }}
	</div>


</div>


<style>

	{% if module.style.top_content.override_default_style %}
	.portfoliofilter-v2-wrap .portfoliofilter-v2-heading {
		padding-bottom: {{ module.style.top_content.bottom_gap }}px;
	}
	{% endif %}

	{% if module.style.category.override_default_style %}
	.portfoliofilter-v2-{{name}} .portfoliofilter-v2-button {
		{% if module.style.category.font_size %}font-size:{{ module.style.category.font_size }}px;{% endif %}
		{% if module.style.category.line_height %}line-height:{{ module.style.category.line_height }};{% endif %}
		{% if module.style.category.font_weight %}font-weight:{{ module.style.category.font_weight }};{% endif %}
		{% if module.style.category.color.color %}color: rgba({{ module.style.category.color.color|convert_rgb  }},{{ module.style.category.color.opacity/100 }});{% endif %}
	}
	.portfoliofilter-v2-{{name}} .portfoliofilter-v2-button.is-checked {
		{% if module.style.category.active_font_weight %}font-weight:{{ module.style.category.active_font_weight }};{% endif %}
		{% if module.style.category.active_color.color %}color: rgba({{ module.style.category.active_color.color|convert_rgb  }},{{ module.style.category.active_color.opacity/100 }});{% endif %}
	}
	.portfoliofilter-v2-wrap .portfoliofilter-v2-button-group {
		{% if module.style.category.border_width %}border-width:{{ module.style.category.border_width }}px;{% endif %}
		{% if module.style.category.border_color.color %}border-color: rgba({{ module.style.category.border_color.color|convert_rgb  }},{{ module.style.category.border_color.opacity/100 }});{% endif %}
	}

	{% if module.style.category.mobile_style %}
	@media(max-width:767px){
		.portfoliofilter-v2-{{name}} .portfoliofilter-v2-button {
			font-size:{{ module.style.category.mobile_font_size }}px;
			line-height:{{ module.style.category.mobile_line_height }};
		}
	}
	{% endif %}
	{% endif %}

	{% if module.style.name_team.override_default_style %}
	.portfoliofilter-v2-{{name}} .portfoliofilter-v2-item-cnt h5 {
		{% if module.style.name_team.font_size %}font-size:{{ module.style.name_team.font_size }}px;{% endif %}
		{% if module.style.name_team.line_height %}line-height:{{ module.style.name_team.line_height }};{% endif %}
		{% if module.style.name_team.font_weight %}font-weight:{{ module.style.name_team.font_weight }};{% endif %}
		{% if module.style.name_team.color.color %}color: rgba({{ module.style.name_team.color.color|convert_rgb  }},{{ module.style.name_team.color.opacity/100 }});{% endif %}
	}


	{% if module.style.name_team.mobile_style %}
	@media(max-width:767px){
		.portfoliofilter-v2-{{name}} .portfoliofilter-v2-item-cnt h5 {
			font-size:{{ module.style.name_team.mobile_font_size }}px;
			line-height:{{ module.style.name_team.mobile_line_height }};
		}
	}
	{% endif %}
	{% endif %}


	{% if module.style.content.override_default_style %}
	.portfoliofilter-v2-{{name}} .portfoliofilter-v2-item-cnt .desc {
		{% if module.style.content.font_size %}font-size:{{ module.style.content.font_size }}px;{% endif %}
		{% if module.style.content.line_height %}line-height:{{ module.style.content.line_height }};{% endif %}
		{% if module.style.content.font_weight %}font-weight:{{ module.style.content.font_weight }};{% endif %}
		{% if module.style.content.color.color %}color: rgba({{ module.style.content.color.color|convert_rgb  }},{{ module.style.content.color.opacity/100 }});{% endif %}
	}


	{% if module.style.content.mobile_style %}
	@media(max-width:767px){
		.portfoliofilter-v2-{{name}} .portfoliofilter-v2-item-cnt .desc {
			font-size:{{ module.style.content.mobile_font_size }}px;
			line-height:{{ module.style.content.mobile_line_height }};
		}
	}
	{% endif %}
	{% endif %}

	{% if module.style.feature.override_default_style %}
	.portfoliofilter-v2-{{name}} .portfoliofilter-v2-feattitle {
		{% if module.style.feature.font_size %}font-size:{{ module.style.feature.font_size }}px;{% endif %}
		{% if module.style.feature.line_height %}line-height:{{ module.style.feature.line_height }};{% endif %}
		{% if module.style.feature.font_weight %}font-weight:{{ module.style.feature.font_weight }};{% endif %}
		{% if module.style.feature.color.color %}color: rgba({{ module.style.feature.color.color|convert_rgb  }},{{ module.style.feature.color.opacity/100 }});{% endif %}
	}

	{% if module.style.feature.mobile_style %}
	@media(max-width:767px){
		.portfoliofilter-v2-{{name}} .portfoliofilter-v2-feattitle {
			font-size:{{ module.style.feature.mobile_font_size }}px;
			line-height:{{ module.style.feature.mobile_line_height }};
		}
	}
	{% endif %}
	{% endif %}

	{% if module.style.image.override_default_style %}
	.portfoliofilter-v2-{{name}} .portfoliofilter-v2-item-inner:hover .portfoliofilter-v2-img:after {
		background: linear-gradient(135deg,rgba({{ module.style.image.gradient_start_color.color|convert_rgb  }},{{ module.style.image.gradient_start_color.opacity/100 }}),rgba({{ module.style.image.gradient_end_color.color|convert_rgb  }},{{ module.style.image.gradient_end_color.opacity/100 }}));
	}
	{% if module.style.image.border_radius %}
	.portfoliofilter-v2-{{name}} .portfoliofilter-v2-img {
		border-radius:{{ module.style.image.border_radius }}px;
	}
	{% endif %}

	{% if module.style.image.image_alignment %}
	.portfoliofilter-v2-{{name}} .portfoliofilter-v2-item-inner.top {
		flex-direction: column-reverse;
	}
	.portfoliofilter-v2-{{name}} .portfoliofilter-v2-item-inner.top .portfoliofilter-v2-img{
		margin-bottom:20px;
		margin-top: 0;
	}
	.portfoliofilter-v2-{{name}} .portfoliofilter-v2-item-inner.bottom {
		flex-direction: column;
	}
	.portfoliofilter-v2-{{name}} .portfoliofilter-v2-item-inner.top .portfoliofilter-v2-item-cnt {
		padding-bottom: 0;
	}
	{% endif %}

	{% endif %}

	{% if module.style.read_more.override_default_style %}
	.portfoliofilter-v2-{{name}} .portfoliofilter-v2-img .more {
		{% if module.style.read_more.font_size %}font-size:{{ module.style.read_more.font_size }}px;{% endif %}
		{% if module.style.read_more.line_height %}line-height:{{ module.style.read_more.line_height }};{% endif %}
		{% if module.style.read_more.font_weight %}font-weight:{{ module.style.read_more.font_weight }};{% endif %}
		{% if module.style.read_more.color.color %}color: rgba({{ module.style.read_more.color.color|convert_rgb  }},{{ module.style.read_more.color.opacity/100 }});{% endif %}
		{% if module.style.read_more.color.color %}fill: rgba({{ module.style.read_more.color.color|convert_rgb  }},{{ module.style.read_more.color.opacity/100 }});{% endif %}
	}
	.portfoliofilter-v2-{{name}} .portfoliofilter-v2-img .more a{
		{% if module.style.read_more.color.color %}fill: rgba({{ module.style.read_more.color.color|convert_rgb  }},{{ module.style.read_more.color.opacity/100 }});{% endif %}
		{% if module.style.read_more.color.color %}color: rgba({{ module.style.read_more.color.color|convert_rgb  }},{{ module.style.read_more.color.opacity/100 }});{% endif %}
	}	

	{% if module.style.read_more.mobile_style %}
	@media(max-width:767px){
		.portfoliofilter-v2-{{name}} .portfoliofilter-v2-img .more {
			font-size:{{ module.style.read_more.mobile_font_size }}px;
			line-height:{{ module.style.read_more.mobile_line_height }};
		}
	}
	{% endif %}
	{% endif %}

	{% if module.style.column.override_default_style %}
	.portfoliofilter-v2-{{name}} .portfoliofilter-v2-item-inner {
		border-radius:{{ module.style.column.border_radius }}px;
		margin-bottom:{{ module.style.column.bottom_gap }}px;	
		background-color: rgba({{ module.style.column.background_color.color|convert_rgb  }},{{ module.style.column.background_color.opacity/100 }});
	}
	.portfoliofilter-v2-item-cnt,
	.portfoliofilter-v2-item-cnt h5{
		color: rgba({{ module.style.column.text_color.color|convert_rgb  }},{{ module.style.column.text_color.opacity/100 }});
	}
	.portfoliofilter-v2-{{name}} .center-align {
		text-align: center;
	}
	.portfoliofilter-v2-{{name}} .right-align {
		text-align: right;
	}
	.portfoliofilter-v2-{{name}} .left-align {
		text-align: left;
	}	
	.portfoliofilter-v2-{{name}} .portfoliofilter-v2-item-wrap.two-col .portfoliofilter-v2-item {
		width: 50%;
	}
	.portfoliofilter-v2-{{name}} .portfoliofilter-v2-item-wrap.four-col .portfoliofilter-v2-item {
		width: 25%;
	}


	@media(max-width:991px){
		.portfoliofilter-v2-{{name}} .portfoliofilter-v2-item-wrap.four-col .portfoliofilter-v2-item{
			width: 50%;
		}
	}

	@media(max-width:640px){
		.portfoliofilter-v2-{{name}} .portfoliofilter-v2-item-wrap.two-col .portfoliofilter-v2-item,
		.portfoliofilter-v2-{{name}} .portfoliofilter-v2-item-wrap.four-col .portfoliofilter-v2-item{
			float: none;
			width: 100%;
		}
	}

	{% endif %}

	.portfoliofilter-v2-{{name}} {
		{{ module.style.section_spacing.css }}
	}	

</style>

{{ require_js(get_asset_url("../../js/isotope.pkgd.js")) }}

{% require_js %}
<script>

	{% set portfolioFiltervVar = name|replace('-','') %}

	let portfolioFilterV2{{portfolioFiltervVar}} = document.querySelector('.portfoliofilter-v2-{{name}} .portfoliofilter-v2-category-wrap');
																								 if (portfolioFilterV2{{portfolioFiltervVar}} !== null) {



		/* Remove Duplicate Category*/
		function removeteamDuplicates{{portfolioFiltervVar}}() {
			const st{{portfolioFiltervVar}} = new Set();
			for (const div of document.querySelectorAll('.portfoliofilter-v2-{{name}} .portfoliofilter-v2-button')) {
																	  if (st{{portfolioFiltervVar}}.has(div.textContent.toLowerCase().trim())) {
				div.parentNode.removeChild(div);
			}
			st{{portfolioFiltervVar}}.add(div.textContent.toLowerCase().trim());
		}
	}
	removeteamDuplicates{{portfolioFiltervVar}}();

	// // external js: isotope.pkgd.js

	// init Isotope
	var {{portfolioFiltervVar}}isoPortfoliov2 = new Isotope( '.portfoliofilter-v2-{{name}} .portfoliofilter-v2-item-wrap',{
																			  itemSelector: '.portfoliofilter-v2-{{name}} .portfoliofilter-v2-item',
																			  });

	// store filter for each group
	var filtersTeam{{portfolioFiltervVar}} = {};

	var filtersElem{{portfolioFiltervVar}} = document.querySelector('.portfoliofilter-v2-{{name}} .portfoliofilter-v2-category-wrap');
																						 filtersElem{{portfolioFiltervVar}}.addEventListener( 'click', function( event ) {
		// check for only button clicks
		var isButton{{portfolioFiltervVar}} = event.target.classList.contains('portfoliofilter-v2-button');
		if ( !isButton{{portfolioFiltervVar}} ) {
			return;
		}

		var buttonGroup{{portfolioFiltervVar}} = fizzyUIUtils.getParent( event.target, '.portfoliofilter-v2-{{name}} .portfoliofilter-v2-button-group' );
																							 var filterGroup = buttonGroup{{portfolioFiltervVar}}.getAttribute('data-portfoliofilter-v2-type');
		// set filter for group
		filtersTeam{{portfolioFiltervVar}}[ filterGroup ] = event.target.getAttribute('data-portfoliofilter-v2');
		// combine filters
		var filterValue{{portfolioFiltervVar}} = concatValues{{portfolioFiltervVar}}( filtersTeam{{portfolioFiltervVar}} );
		// set filter for Isotope
		{{portfolioFiltervVar}}isoPortfoliov2.arrange({ filter: filterValue{{portfolioFiltervVar}} });
	});

	// change is-checked class on buttons
	var buttonGroups{{portfolioFiltervVar}} = document.querySelectorAll('.portfoliofilter-v2-{{name}} .portfoliofilter-v2-button-group');

																							  for ( var i=0; i < buttonGroups{{portfolioFiltervVar}}.length; i++ ) {
		var buttonGroup{{portfolioFiltervVar}} = buttonGroups{{portfolioFiltervVar}}[i];
		var onButtonGroupClick{{portfolioFiltervVar}} = getOnButtonGroupClick{{portfolioFiltervVar}}( buttonGroup{{portfolioFiltervVar}} );
		buttonGroup{{portfolioFiltervVar}}.addEventListener( 'click', onButtonGroupClick{{portfolioFiltervVar}} );
	}

	function getOnButtonGroupClick{{portfolioFiltervVar}}( buttonGroup{{portfolioFiltervVar}} ) {
		return function( event ) {
			// check for only button clicks
			var isButton{{portfolioFiltervVar}} = event.target.classList.contains('portfoliofilter-v2-button');
			if ( !isButton{{portfolioFiltervVar}} ) {
				return;
			}
			var checkedButton{{portfolioFiltervVar}} = buttonGroup{{portfolioFiltervVar}}.querySelector('.is-checked');
			if (checkedButton{{portfolioFiltervVar}} !== null) {
				checkedButton{{portfolioFiltervVar}}.classList.remove('is-checked')
			}
			event.target.classList.add('is-checked');
		}
	}

	// flatten object by concatting values
	function concatValues{{portfolioFiltervVar}}( obj ) {
		var value = '';
		for ( var prop in obj ) {
			value += obj[ prop ];
		}
		return value;
	}

	}
</script>
{% end_require_js %}


{% require_css %}
<style>
	@media(max-width:{{ theme.media_responsive_breakpoints.tablet_breakpoint }}px){
		.portfoliofilter-v2-wrap .portfoliofilter-v2-item{
			width: 50%;
		}
	}

	@media(max-width:{{ theme.media_responsive_breakpoints.mobile_breakpoint }}px){
		.portfoliofilter-v2-wrap .portfoliofilter-v2-button {
			margin-right: 30px;
			margin-bottom: 15px;
		}
	}
</style>
{% end_require_css %}


